"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[963,413],{6519:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var l=t(3396),s=t(7139);const i={key:0,class:"modal-container"};function o(e,a,t,o,n,r){const c=(0,l.up)("TripSelectStart"),u=(0,l.up)("TripSelectDetail");return n.overlay?((0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",{class:"overlay",onClick:a[0]||(a[0]=(...e)=>r.closeOverlay&&r.closeOverlay(...e))}),(0,l.Wm)(c,{onCloseDialog:r.closeDialog,onSubmitTrip:r.submitTrip,class:(0,s.C_)({"disabled-modal":this.startFlag})},null,8,["onCloseDialog","onSubmitTrip","class"]),(0,l.Wm)(u,{onCloseDialog:r.closeDialog,onOpenStartDialog:a[1]||(a[1]=e=>r.openStartDialog(!0)),class:(0,s.C_)({"disabled-modal":this.detailFlag})},null,8,["onCloseDialog","class"])])):(0,l.kq)("",!0)}var n=t(515),r=t(5370),c={components:{TripSelectStart:n["default"],TripSelectDetail:r["default"]},name:"TripSelect",data(){return{overlay:!0,startFlag:!1,detailFlag:!0,name:"",email:""}},mounted(){this.emitter.on("openSelect",(e=>{this.overlay=e,this.startFlag=!e,this.detailFlag=e}))},methods:{openStartDialog(e){this.overlay=e,this.startFlag=!e,this.detailFlag=e},openDetailDialog(e){this.overlay=e,this.startFlag=e,this.detailFlag=!e},closeDialog(){this.overlay=!1},submitTrip(e){this.openDetailDialog(e)},closeOverlay(){}}},u=t(89);const m=(0,u.Z)(c,[["render",o],["__scopeId","data-v-3f4146cc"]]);var p=m},515:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(3396),s=t(7139),i=t(7771),o=t(5101),n=t(11),r=t(1334),c=t(6422),u=t(9671),m=t(5869);const p=e=>((0,l.dD)("data-v-00a7987e"),e=e(),(0,l.Cn)(),e),d={class:"modal-start"},v=p((()=>(0,l._)("div",{class:"welcome-message"},[(0,l._)("p",{class:"welcome-text"},"환영합니다"),(0,l._)("p",{class:"app-name"},[(0,l._)("span",{class:"accent-color"},"OQplanner"),(0,l.Uk)("와 함께")]),(0,l._)("p",{class:"invite-text"},"여행을 떠나시겠어요?")],-1)));function h(e,a,t,p,h,g){return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(n._,{class:"custom-card"},{default:(0,l.w5)((()=>[v,(0,l.Wm)(c.O,{ref:"form","lazy-validation":""},{default:(0,l.w5)((()=>[(0,l.Wm)(m.h,{label:"여행 이름",modelValue:h.tripPlanName,"onUpdate:modelValue":a[0]||(a[0]=e=>h.tripPlanName=e),placeholder:"여행 이름을 입력해 주세요.",rules:h.tripPlanNameRules,class:"name-input no-cursor"},null,8,["modelValue","rules"]),(0,l.Wm)(m.h,{label:"여행자 이름",modelValue:h.tripUserName,"onUpdate:modelValue":a[1]||(a[1]=e=>h.tripUserName=e),placeholder:"여행자 본인 이름을 입력해 주세요.",rules:h.tripUserNameRules,class:"name-input no-cursor"},null,8,["modelValue","rules"])])),_:1},512),(0,l.Wm)(u.v,{modelValue:h.snackbar,"onUpdate:modelValue":a[2]||(a[2]=e=>h.snackbar=e),timeout:"3000",class:"snackbar-center",flex:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(h.tripPlanName)+", 여행자님 이용해 주셔서 감사합니다. ",1)])),_:1},8,["modelValue"]),(0,l.Wm)(r.h,{class:"button-container"},{default:(0,l.w5)((()=>[(0,l.Wm)(o.T,{onClick:g.submitCompanion,class:"action-button button-style"},{default:(0,l.w5)((()=>[(0,l.Uk)("같이가기")])),_:1},8,["onClick"]),(0,l.Wm)(o.T,{onClick:a[3]||(a[3]=e=>g.submitTrip(this.flag)),class:"action-button button-style"},{default:(0,l.w5)((()=>[(0,l.Uk)("여행하기")])),_:1})])),_:1}),(0,l.Wm)(i.w,{modelValue:h.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>h.alert=e),class:"disabled-alert black-and-white",transition:"scale-transition",closable:"",prominent:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(h.alertMessage),1)])),_:1},8,["modelValue"])])),_:1})])}t(7658);var g={name:"TripSelectStart",data(){return{snackbar:!1,inputs:{},tripPlanName:"",tripUserName:"",companionName:"",flag:!0,tripPlanNameRules:[e=>!!e||"여행 이름은 필수사항 입니다.",e=>!(e&&e.length>8)||"여행 이름은 8자 이상 입력할 수 없습니다."],tripUserNameRules:[e=>!!e||"여행자 이름은 필수사항 입니다.",e=>/^[가-힣a-zA-Z\s]*$/.test(e)||"여행자 이름은 한글/영어만 입력 가능합니다.",e=>!(e&&e.length>15)||"여행자 이름은 8자 이상 입력할 수 없습니다."],companionNameRules:[e=>!!e||"동행자 이름은 필수사항 입니다.",e=>/^[가-힣a-zA-Z\s]*$/.test(e)||"동행자 이름은 한글/영어만 입력 가능합니다.",e=>!(e&&e.length>15)||"동행자 이름은 8자 이상 입력할 수 없습니다."],alertMessage:"",alert:!1}},methods:{closeDialog(){this.$emit("closeDialog")},async submitCompanion(){await this.$refs.form.validate().then((e=>{if(e.valid){const e={tripPlannerNm:this.tripUserName,tripPlanNm:this.tripPlanName,tripFlag:"oldFlag"};this.$axios.get("/trip/plan/info",{params:e}).then((e=>{const a=e.data.tripPlanNo;void 0==a?(this.alertMessage="존재하지 않는 여행 입니다.",this.alert=!0):(this.snackbar=!0,this.$axios.get("/common/api/getSessionValue").then((e=>{console.log("success sessionResponse"),console.log(e.data);const a=e.data.projectNoSession,t=e.data.userNoSession;sessionStorage.setItem("projectNoSession",a),sessionStorage.setItem("userNoSession",t),setTimeout((()=>{this.$emit("closeDialog"),this.$router.push("/schedule")}),3e3)})).catch((e=>{console.error(e)})).finally((()=>{this.emitter.emit("accompanyTrip")})))})).catch((e=>{console.error(e)}))}else console.log("validate fail")}))},async submitTrip(e){await this.$refs.form.validate().then((a=>{if(a.valid){const a={tripPlannerNm:this.tripUserName,tripPlanNm:this.tripPlanName,tripFlag:"newFlag"};this.$axios.get("/trip/plan/info",{params:a}).then((a=>{const t=a.data.tripPlanNo;void 0==t?(console.log("planRes",a.data.tripPlanNo),this.inputs.tripPlanName=this.tripPlanName,this.inputs.tripUserName=this.tripUserName,this.$emit("submitTrip",e),console.log(e),this.emitter.emit("submitDetail",this.inputs)):(this.alertMessage="이미 생성된 여행 입니다.",this.alert=!0)})).catch((e=>{console.error(e)}))}else console.log("validate fail")}))}}},f=t(89);const b=(0,f.Z)(g,[["render",h],["__scopeId","data-v-00a7987e"]]);var k=b},9671:function(e,a,t){t.d(a,{v:function(){return N}});var l=t(3396),s=t(836),i=t(292),o=t(3185),n=t(5180),r=t(489),c=t(8717),u=t(4231),m=t(5975),p=t(5935),d=t(5221),v=t(4870),h=t(3766),g=t(131),f=t(1107),b=t(9888);const k=(0,h.U)({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,n.y)({location:"bottom"}),...(0,r.F)(),...(0,u.I)(),...(0,d.bk)(),...(0,p.x$)(),...(0,g.CE)((0,i.B)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),N=(0,f.ev)()({name:"VSnackbar",props:k(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const h=(0,c.z)(e,"modelValue"),{locationStyles:g}=(0,n.T)(e),{positionClasses:f}=(0,r.K)(e),{scopeId:k}=(0,m.a)(),{themeClasses:N}=(0,p.ER)(e),{colorClasses:S,colorStyles:y,variantClasses:w}=(0,d.c1)(e),{roundedClasses:_}=(0,u.b)(e),P=(0,v.iH)();(0,l.YP)(h,D),(0,l.YP)((()=>e.timeout),D),(0,l.bv)((()=>{h.value&&D()}));let C=-1;function D(){window.clearTimeout(C);const a=Number(e.timeout);h.value&&-1!==a&&(C=window.setTimeout((()=>{h.value=!1}),a))}function T(){window.clearTimeout(C)}return(0,b.L)((()=>{const[a]=i.y.filterProps(e);return(0,l.Wm)(i.y,(0,l.dG)({ref:P,class:["v-snackbar",{"v-snackbar--active":h.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--vertical":e.vertical},f.value,e.class],style:e.style},a,{modelValue:h.value,"onUpdate:modelValue":e=>h.value=e,contentProps:(0,l.dG)({class:["v-snackbar__wrapper",N.value,S.value,_.value,w.value],style:[g.value,y.value],onPointerenter:T,onPointerleave:D},a.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},k),{default:()=>[(0,d.Ux)(!1,"v-snackbar"),t.default&&(0,l.Wm)("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[t.default()]),t.actions&&(0,l.Wm)(s.z,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[(0,l.Wm)("div",{class:"v-snackbar__actions"},[t.actions()])]})],activator:t.activator})})),(0,o.F)({},P)}})}}]);
//# sourceMappingURL=963.fb8d4bbf.js.map