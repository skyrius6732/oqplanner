"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[37,925,594,675],{782:function(o,e,t){t.r(e),t.d(e,{default:function(){return j}});var i=t(3396),s=t(9242),a=t(7139),l=t(5101),n=t(9752),r=t(6572),c=t(1888),m=t(1334),p=t(3601),u=t(4075),d=t(6422),b=t(3369),h=t(6824),f=t(8521),g=t(9234),v=t(4039),C=t(9671),w=t(5869);const y=o=>((0,i.dD)("data-v-48a600d2"),o=o(),(0,i.Cn)(),o),k=y((()=>(0,i._)("div",{class:"overlay"},[(0,i._)("span",{class:"no-results-text"},"적용 버튼을 눌러 여행 비용을 등록 해주세요.")],-1)));function N(o,e,t,y,N,V){const _=(0,i.up)("TripPublicCost"),D=(0,i.up)("TripPrivateCost"),W=(0,i.up)("TripPrivateCostDetail");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(b.K,{class:"custom-container"},{default:(0,i.w5)((()=>[(0,i.Wm)(d.O,{ref:"form","lazy-validation":""},{default:(0,i.w5)((()=>[(0,i.Wm)(h.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,{class:"m-1"},{default:(0,i.w5)((()=>[(0,i.Wm)(h.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v.rL,{modelValue:N.numberOfCompanions,"onUpdate:modelValue":[e[0]||(e[0]=o=>N.numberOfCompanions=o),V.clickComNumber],items:[0,1,2,3,4],label:"여행 인원을 선택 해주세요(본인 포함)",disabled:N.companionNumDisabled,class:"margin-right"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),(0,i.Wm)(C.v,{modelValue:N.snackbar,"onUpdate:modelValue":e[1]||(e[1]=o=>N.snackbar=o),timeout:"3000",class:"snackbar-center",flex:""},{default:(0,i.w5)((()=>[(0,i.Uk)(" 여행자 수는 한번 적용 후 변경이 불가하오니 참고 부탁드립니다. ")])),_:1},8,["modelValue"])])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.companions,((o,e)=>((0,i.wg)(),(0,i.j4)(f.D,{key:e,class:"m-1"},{default:(0,i.w5)((()=>[(0,i.Wm)(h.o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w.h,{outlined:"",class:"gray-text-field margin-right",label:`여행자 ${e+1}`,rules:N.companionNameRules,disabled:N.companionNmDisabled,modelValue:o.tripCompanionNm,"onUpdate:modelValue":e=>o.tripCompanionNm=e,onKeyup:(0,s.D2)(V.companionApply,["enter"])},null,8,["label","rules","disabled","modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1024)])),_:2},1024)))),128)),(0,i.Wm)(f.D,{class:"m-4"},{default:(0,i.w5)((()=>[N.companionEdit?((0,i.wg)(),(0,i.j4)(h.o,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(l.T,{onClick:V.companionApply,class:(0,a.C_)({"apply-button-style-mobile center-button":!0===this.mobileFlag,"apply-button-style center-button":!1===this.mobileFlag})},{default:(0,i.w5)((()=>[(0,i.Uk)("적용")])),_:1},8,["onClick","class"])])),_:1})):((0,i.wg)(),(0,i.j4)(h.o,{key:1},{default:(0,i.w5)((()=>[0!=N.numberOfCompanions?((0,i.wg)(),(0,i.j4)(l.T,{key:0,onClick:V.companionModify,class:(0,a.C_)({"apply-button-style-mobile-modify-reset center-button":!0===this.mobileFlag,"apply-button-style center-button":!1===this.mobileFlag})},{default:(0,i.w5)((()=>[(0,i.Uk)("여행자 수정")])),_:1},8,["onClick","class"])):(0,i.kq)("",!0),(0,i.Wm)(l.T,{onClick:V.startShowResetDialog,class:(0,a.C_)({"apply-button-style-mobile-modify-reset center-button":!0===this.mobileFlag,"apply-button-style center-button":!1===this.mobileFlag})},{default:(0,i.w5)((()=>[(0,i.Uk)("전체 초기화")])),_:1},8,["onClick","class"])])),_:1}))])),_:1})])),_:1})])),_:1},512),(0,i.Wm)(h.o,{class:"underline-row"},{default:(0,i.w5)((()=>[(0,i.Wm)(f.D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u.J)])),_:1})])),_:1}),N.isOverlayVisible?((0,i.wg)(),(0,i.j4)(h.o,{key:0,onClick:V.hideOverlay},{default:(0,i.w5)((()=>[k])),_:1},8,["onClick"])):(0,i.kq)("",!0),N.isCostVisible?((0,i.wg)(),(0,i.j4)(_,{key:1})):(0,i.kq)("",!0),N.isCostVisible?((0,i.wg)(),(0,i.j4)(D,{key:2,companions:N.companions,ref:"privateCostMethod",onViewCost:V.viewCost},null,8,["companions","onViewCost"])):(0,i.kq)("",!0),(0,i.Wm)(W,{modelValue:N.isModalVisible,"onUpdate:modelValue":e[2]||(e[2]=o=>N.isModalVisible=o),onCloseDialog:V.closeDialog},null,8,["modelValue","onCloseDialog"])])),_:1}),(0,i.Wm)(p.B,{modelValue:N.resetDialog,"onUpdate:modelValue":e[4]||(e[4]=o=>N.resetDialog=o),persistent:"",width:"auto"},{default:(0,i.w5)((()=>[(0,i.Wm)(n._,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r.E,{class:(0,a.C_)({"text-h5":!1===this.mobileFlag,"mobile-font":!0===this.mobileFlag})},{default:(0,i.w5)((()=>[(0,i.Uk)(" 여행 비용 전체 초기화 하시겠습니까? ")])),_:1},8,["class"]),(0,i.Wm)(c.Z,null,{default:(0,i.w5)((()=>[(0,i.Uk)("등록 하신 여행자, 여행 공통비용, 여행 개인비용이 모두 삭제 됩니다.")])),_:1}),(0,i.Wm)(m.h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(g.C),(0,i.Wm)(l.T,{variant:"text",onClick:e[3]||(e[3]=o=>N.resetDialog=!1),class:"button-style"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 취소 ")])),_:1}),(0,i.Wm)(l.T,{variant:"text",onClick:V.startReset,class:"button-style"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 확인 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var V=t(9753),_=t(9142),D=t(2685),W={components:{TripPrivateCostDetail:V["default"],TripPublicCost:_["default"],TripPrivateCost:D["default"]},computed:{},created(){this.isMobile(),this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession"),console.log("projectNoSession",sessionStorage.getItem("projectNoSession")),console.log("userNoSession",sessionStorage.getItem("userNoSession")),console.log(this.tripProjectNo),console.log(this.tripUserNo)},mounted(){this.companionSelect()},data(){return{resetDialog:!1,snackbar:!1,companionExistFlag:!1,isModalVisible:!1,isCostVisible:!1,tripProjectNo:"",tripUserNo:"",numberOfCompanions:0,companions:Array.from({length:3},(()=>({tripProjectNo:"",tripCompanionNm:"",tripCompanionOrder:""}))),isOverlayVisible:!0,companionNmDisabled:!1,companionNumDisabled:!1,companionEdit:!0,companionNameRules:[o=>!!o||"여행자 이름은 필수사항 입니다.",o=>/^[가-힣a-zA-Z\s]*$/.test(o)||"여행자 이름은 한글/영어만 입력 가능합니다.",o=>!(o&&o.length>8)||"여행자 이름은 8자 이상 입력할 수 없습니다."],mobileFlag:""}},methods:{isMobile(){const o=window.innerWidth;this.mobileFlag=!(o>768)},startShowResetDialog(){this.resetDialog=!0},startReset(){this.resetDialog=!1,this.allReset()},companionSelect(){const o={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/companion/info/list",{params:o}).then((o=>{let e=o.data.length;this.companionExistFlag=e>0,this.companions=o.data,this.numberOfCompanions=e,console.log("companionSelect response",o)})).catch((o=>{console.log(o)})).finally((()=>{this.companionExistFlag?this.companionNumDisabled=!0:this.companionNumDisabled=!1}))},async companionApply(){const o=await this.$refs.form.validate();if(o.valid){const o=this.companions.map((o=>(console.log("item",o),{tripProjectNo:this.tripProjectNo,tripCompanionNm:o.tripCompanionNm,tripCompanionOrder:o.tripCompanionOrder})));if(0==this.companionExistFlag){console.log("여행자 신규 저장");for(const o of this.companions){console.log("저장시 this.companions element",o);const t={...o,tripProjectNo:this.tripProjectNo};console.log("저장시 this.companions element",t);try{const e=await this.$axios.post("/trip/companion/info",t);console.log("new companion",e.data);const i={...t,tripCompanionNo:e.data};this.companions=this.companions.map((e=>e===o?i:e))}catch(e){console.log(e)}}}else{console.log("여행자 기존 수정");try{const e=await this.$axios.put("/trip/companion/info/list",o);console.log(e)}catch(e){console.log(e)}}this.isCostVisible=!0,this.companionNumDisabled=!0,this.companionNmDisabled=!0,this.isOverlayVisible=!1,this.companionEdit=!1}this.$nextTick((()=>{}))},companionModify(){this.isCostVisible=!1,this.companionNmDisabled=!1,this.isOverlayVisible=!0,this.companionEdit=!0},companionReset(){this.isCostVisible=!1,this.companionNmDisabled=!1,this.companionNumDisabled=!1,this.isOverlayVisible=!0,this.companionEdit=!0,this.numberOfCompanions=0,this.companions=[]},clickComNumber(){this.snackbar=!0,this.companions=Array.from({length:this.numberOfCompanions},(()=>({tripProjectNo:"",tripCompanionNm:"",tripCompanionOrder:""})))},hideOverlay(){},viewCost(o){console.log("Received index from TripPrivateCost:",o),console.log("viewCost isModalVisible",this.isModalVisible),this.isModalVisible=!0},allReset(){let o={tripProjectNo:this.tripProjectNo};this.$axios.delete("/trip/cost/info/all",{data:o}).then((()=>this.$axios.delete("/trip/companion/info",o))).then((()=>{})).catch((()=>{})).finally((()=>{this.companionReset()}))},closeDialog(){this.$refs.privateCostMethod.costShow(),this.isModalVisible=!1}}},P=t(89);const S=(0,P.Z)(W,[["render",N],["__scopeId","data-v-48a600d2"]]);var j=S},9671:function(o,e,t){t.d(e,{v:function(){return w}});var i=t(3396),s=t(836),a=t(292),l=t(3185),n=t(5180),r=t(489),c=t(8717),m=t(4231),p=t(5975),u=t(5935),d=t(5221),b=t(4870),h=t(3766),f=t(131),g=t(1107),v=t(9888);const C=(0,h.U)({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,n.y)({location:"bottom"}),...(0,r.F)(),...(0,m.I)(),...(0,d.bk)(),...(0,u.x$)(),...(0,f.CE)((0,a.B)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),w=(0,g.ev)()({name:"VSnackbar",props:C(),emits:{"update:modelValue":o=>!0},setup(o,e){let{slots:t}=e;const h=(0,c.z)(o,"modelValue"),{locationStyles:f}=(0,n.T)(o),{positionClasses:g}=(0,r.K)(o),{scopeId:C}=(0,p.a)(),{themeClasses:w}=(0,u.ER)(o),{colorClasses:y,colorStyles:k,variantClasses:N}=(0,d.c1)(o),{roundedClasses:V}=(0,m.b)(o),_=(0,b.iH)();(0,i.YP)(h,W),(0,i.YP)((()=>o.timeout),W),(0,i.bv)((()=>{h.value&&W()}));let D=-1;function W(){window.clearTimeout(D);const e=Number(o.timeout);h.value&&-1!==e&&(D=window.setTimeout((()=>{h.value=!1}),e))}function P(){window.clearTimeout(D)}return(0,v.L)((()=>{const[e]=a.y.filterProps(o);return(0,i.Wm)(a.y,(0,i.dG)({ref:_,class:["v-snackbar",{"v-snackbar--active":h.value,"v-snackbar--multi-line":o.multiLine&&!o.vertical,"v-snackbar--vertical":o.vertical},g.value,o.class],style:o.style},e,{modelValue:h.value,"onUpdate:modelValue":o=>h.value=o,contentProps:(0,i.dG)({class:["v-snackbar__wrapper",w.value,y.value,V.value,N.value],style:[f.value,k.value],onPointerenter:P,onPointerleave:W},e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},C),{default:()=>[(0,d.Ux)(!1,"v-snackbar"),t.default&&(0,i.Wm)("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[t.default()]),t.actions&&(0,i.Wm)(s.z,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[(0,i.Wm)("div",{class:"v-snackbar__actions"},[t.actions()])]})],activator:t.activator})})),(0,l.F)({},_)}})}}]);
//# sourceMappingURL=37.94dae7f6.js.map