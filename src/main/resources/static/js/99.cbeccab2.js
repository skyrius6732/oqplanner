"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[99,638],{6519:function(e,a,t){t.r(a),t.d(a,{default:function(){return d}});var l=t(3396),s=t(7139);const o={key:0,class:"modal-container"};function i(e,a,t,i,n,r){const c=(0,l.up)("TripSelectStart"),u=(0,l.up)("TripSelectDetail");return n.overlay?((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",{class:"overlay",onClick:a[0]||(a[0]=(...e)=>r.closeOverlay&&r.closeOverlay(...e))}),(0,l.Wm)(c,{onCloseDialog:r.closeDialog,onSubmitTrip:r.submitTrip,class:(0,s.C_)({"disabled-modal":this.startFlag})},null,8,["onCloseDialog","onSubmitTrip","class"]),(0,l.Wm)(u,{onCloseDialog:r.closeDialog,onOpenStartDialog:a[1]||(a[1]=e=>r.openStartDialog(!0)),class:(0,s.C_)({"disabled-modal":this.detailFlag})},null,8,["onCloseDialog","class"])])):(0,l.kq)("",!0)}var n=t(6432),r=t(8166),c={components:{TripSelectStart:n["default"],TripSelectDetail:r["default"]},name:"TripSelect",data(){return{overlay:!0,startFlag:!1,detailFlag:!0,name:"",email:""}},mounted(){this.emitter.on("openSelect",(e=>{this.overlay=e,this.startFlag=!e,this.detailFlag=e}))},methods:{openStartDialog(e){this.overlay=e,this.startFlag=!e,this.detailFlag=e},openDetailDialog(e){this.overlay=e,this.startFlag=e,this.detailFlag=!e},closeDialog(){this.overlay=!1},submitTrip(e){this.openDetailDialog(e)},closeOverlay(){}}},u=t(89);const m=(0,u.Z)(c,[["render",i],["__scopeId","data-v-3f4146cc"]]);var d=m},6432:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var l=t(3396),s=t(7139),o=t(7771),i=t(5101),n=t(9752),r=t(6572),c=t(1888),u=t(1334),m=t(6422),d=t(9671),p=t(5869);const v=e=>((0,l.dD)("data-v-71dbfeff"),e=e(),(0,l.Cn)(),e),h={class:"modal-start"},f=v((()=>(0,l._)("p",{class:"welcome-text"},"환영합니다",-1))),g=v((()=>(0,l._)("p",{class:"app-name"},[(0,l._)("span",{class:"accent-color"},"OQplanner"),(0,l.Uk)("와 함께")],-1))),b=v((()=>(0,l._)("p",{class:"invite-text"},"여행을 떠나시겠어요?",-1)));function k(e,a,t,v,k,y){const N=(0,l.Q2)("flex");return(0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(n._,{class:"custom-card v-flex"},{default:(0,l.w5)((()=>[(0,l.Wm)(r.E,{class:"welcome-message v-layout align-center"},{default:(0,l.w5)((()=>[f,g,b])),_:1}),(0,l.Wm)(c.Z,{class:"v-layout v-flex"},{default:(0,l.w5)((()=>[(0,l.Wm)(m.O,{ref:"form","lazy-validation":""},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(p.h,{label:"여행 이름",modelValue:k.tripPlanName,"onUpdate:modelValue":a[0]||(a[0]=e=>k.tripPlanName=e),placeholder:"여행 이름을 입력해 주세요.",rules:k.tripPlanNameRules,class:"name-input no-cursor"},null,8,["modelValue","rules"]),[[N]]),(0,l.wy)((0,l.Wm)(p.h,{label:"여행자 이름",modelValue:k.tripUserName,"onUpdate:modelValue":a[1]||(a[1]=e=>k.tripUserName=e),placeholder:"여행자 본인 이름을 입력해 주세요.",rules:k.tripUserNameRules,class:"name-input no-cursor"},null,8,["modelValue","rules"]),[[N]])])),_:1},512)])),_:1}),(0,l.Wm)(d.v,{modelValue:k.snackbar,"onUpdate:modelValue":a[2]||(a[2]=e=>k.snackbar=e),timeout:"3000",class:"snackbar-center",flex:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(k.tripPlanName)+", 여행자님 이용해 주셔서 감사합니다. ",1)])),_:1},8,["modelValue"]),(0,l.Wm)(u.h,{class:"button-container v-layout justify-space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(i.T,{onClick:y.submitCompanion,class:"action-button button-style"},{default:(0,l.w5)((()=>[(0,l.Uk)("같이가기")])),_:1},8,["onClick"]),(0,l.Wm)(i.T,{onClick:a[3]||(a[3]=e=>y.submitTrip(this.flag)),class:"action-button button-style"},{default:(0,l.w5)((()=>[(0,l.Uk)("여행하기")])),_:1})])),_:1}),(0,l.Wm)(o.w,{modelValue:k.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>k.alert=e),class:"disabled-alert black-and-white",transition:"scale-transition",closable:"",prominent:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(k.alertMessage),1)])),_:1},8,["modelValue"])])),_:1})])}t(7658);var y={name:"TripSelectStart",mounted(){},data(){return{snackbar:!1,inputs:{},tripPlanName:"",tripUserName:"",companionName:"",flag:!0,tripPlanNameRules:[e=>!!e||"여행 이름은 필수사항 입니다.",e=>!(e&&e.length>8)||"여행 이름은 8자 이상 입력할 수 없습니다."],tripUserNameRules:[e=>!!e||"여행자 이름은 필수사항 입니다.",e=>/^[가-힣a-zA-Z\s]*$/.test(e)||"여행자 이름은 한글/영어만 입력 가능합니다.",e=>!(e&&e.length>15)||"여행자 이름은 8자 이상 입력할 수 없습니다."],companionNameRules:[e=>!!e||"동행자 이름은 필수사항 입니다.",e=>/^[가-힣a-zA-Z\s]*$/.test(e)||"동행자 이름은 한글/영어만 입력 가능합니다.",e=>!(e&&e.length>15)||"동행자 이름은 8자 이상 입력할 수 없습니다."],alertMessage:"",alert:!1}},methods:{closeDialog(){this.$emit("closeDialog")},async submitCompanion(){await this.$refs.form.validate().then((e=>{if(e.valid){const e={tripPlannerNm:this.tripUserName,tripPlanNm:this.tripPlanName,tripFlag:"oldFlag"};let a="/trip/plan/info";this.$axios.get(a,{params:e}).then((e=>{const a=e.data.tripPlanNo;void 0==a?(this.alertMessage="존재하지 않는 여행 입니다.",this.alert=!0):(this.snackbar=!0,this.$axios.get("/common/api/getSessionValue").then((e=>{console.log("success sessionResponse"),console.log(e.data);const a=e.data.projectNoSession,t=e.data.userNoSession;sessionStorage.setItem("projectNoSession",a),sessionStorage.setItem("userNoSession",t),setTimeout((()=>{this.$emit("closeDialog"),this.$router.push("/schedule"),this.$store.dispatch("login")}),3e3)})).catch((e=>{console.error(e)})).finally((()=>{console.log("this.$refs",this.$refs),setTimeout((()=>{this.emitter.emit("accompanyTrip")}),3e3)})))})).catch((e=>{console.error(e)}))}else console.log("validate fail")}))},async submitTrip(e){await this.$refs.form.validate().then((a=>{if(a.valid){const a={tripPlannerNm:this.tripUserName,tripPlanNm:this.tripPlanName,tripFlag:"newFlag"};this.$axios.get("/trip/plan/info",{params:a}).then((a=>{const t=a.data.tripPlanNo;void 0==t?(console.log("planRes",a.data.tripPlanNo),this.inputs.tripPlanName=this.tripPlanName,this.inputs.tripUserName=this.tripUserName,this.$emit("submitTrip",e),console.log(e),this.emitter.emit("submitDetail",this.inputs)):(this.alertMessage="이미 생성된 여행 입니다.",this.alert=!0)})).catch((e=>{console.error(e)}))}else console.log("validate fail")}))}}},N=t(89);const w=(0,N.Z)(y,[["render",k],["__scopeId","data-v-71dbfeff"]]);var S=w},9671:function(e,a,t){t.d(a,{v:function(){return y}});var l=t(3396),s=t(836),o=t(292),i=t(3185),n=t(5180),r=t(489),c=t(8717),u=t(4231),m=t(5975),d=t(5935),p=t(5221),v=t(4870),h=t(3766),f=t(131),g=t(1107),b=t(9888);const k=(0,h.U)({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,n.y)({location:"bottom"}),...(0,r.F)(),...(0,u.I)(),...(0,p.bk)(),...(0,d.x$)(),...(0,f.CE)((0,o.B)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),y=(0,g.ev)()({name:"VSnackbar",props:k(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const h=(0,c.z)(e,"modelValue"),{locationStyles:f}=(0,n.T)(e),{positionClasses:g}=(0,r.K)(e),{scopeId:k}=(0,m.a)(),{themeClasses:y}=(0,d.ER)(e),{colorClasses:N,colorStyles:w,variantClasses:S}=(0,p.c1)(e),{roundedClasses:_}=(0,u.b)(e),P=(0,v.iH)();(0,l.YP)(h,D),(0,l.YP)((()=>e.timeout),D),(0,l.bv)((()=>{h.value&&D()}));let C=-1;function D(){window.clearTimeout(C);const a=Number(e.timeout);h.value&&-1!==a&&(C=window.setTimeout((()=>{h.value=!1}),a))}function T(){window.clearTimeout(C)}return(0,b.L)((()=>{const[a]=o.y.filterProps(e);return(0,l.Wm)(o.y,(0,l.dG)({ref:P,class:["v-snackbar",{"v-snackbar--active":h.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--vertical":e.vertical},g.value,e.class],style:e.style},a,{modelValue:h.value,"onUpdate:modelValue":e=>h.value=e,contentProps:(0,l.dG)({class:["v-snackbar__wrapper",y.value,N.value,_.value,S.value],style:[f.value,w.value],onPointerenter:T,onPointerleave:D},a.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},k),{default:()=>[(0,p.Ux)(!1,"v-snackbar"),t.default&&(0,l.Wm)("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[t.default()]),t.actions&&(0,l.Wm)(s.z,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[(0,l.Wm)("div",{class:"v-snackbar__actions"},[t.actions()])]})],activator:t.activator})})),(0,i.F)({},P)}})}}]);
//# sourceMappingURL=99.cbeccab2.js.map