"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[552],{8552:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var o=s(3396),l=s(7139),i=s(5101),c=s(6824),n=s(8521),r=s(3289),u=s(4413),a=s(5869);const d=t=>((0,o.dD)("data-v-c93b2d46"),t=t(),(0,o.Cn)(),t),p=d((()=>(0,o._)("div",null,[(0,o._)("span",{class:"subtitle-detail"},"공통 비용")],-1))),h=d((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center"},"NO."),(0,o._)("th",{class:"text-center"},"사용처"),(0,o._)("th",{class:"text-center"},"비용(원)"),(0,o._)("th",{class:"text-center"},"메모")])],-1))),g={class:"text-center"},f={class:"text-center"},C={class:"text-center"},b={class:"text-center"},y={key:0},w=d((()=>(0,o._)("td",{class:"text-center"},"합계",-1))),m=d((()=>(0,o._)("td",null,null,-1))),N={class:"text-center"};function S(t,e,s,d,S,k){return(0,o.wg)(),(0,o.j4)(c.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n.D,null,{default:(0,o.w5)((()=>[p])),_:1}),S.isEditing?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(n.D,{key:0,style:{width:"80px","text-align":"right"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i.T,{onClick:k.costModify,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Uk)("비용 수정")])),_:1},8,["onClick"])])),_:1})),S.isEditing?((0,o.wg)(),(0,o.j4)(n.D,{key:1,style:{width:"80px","text-align":"right"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i.T,{onClick:k.addRow,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(i.T,{onClick:k.removeRow,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Wm)(r.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-minus")])),_:1})])),_:1},8,["onClick"]),(0,o.Wm)(i.T,{onClick:k.costReset,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Uk)("비용 초기화")])),_:1},8,["onClick"]),(0,o.Wm)(i.T,{onClick:k.costShow,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Uk)("비용 보기")])),_:1},8,["onClick"]),(0,o.Wm)(i.T,{onClick:k.costSave,class:"button-style"},{default:(0,o.w5)((()=>[(0,o.Uk)("비용 저장")])),_:1},8,["onClick"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(u.Y,{"fixed-header":"",height:"{{(publicCosts.length * 50) + 20}}px",style:{width:"100%"}},{default:(0,o.w5)((()=>[h,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(S.publicCosts,((t,e)=>((0,o.wg)(),(0,o.iD)("tr",{key:t.costOrder},[S.isEditing?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("td",b,(0,l.zw)(t.costOrder),1),(0,o._)("td",null,[(0,o.Wm)(a.h,{outlined:"",class:"gray-text-field",rules:S.costUseRules,modelValue:S.publicCosts[e].costUse,"onUpdate:modelValue":t=>S.publicCosts[e].costUse=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,o._)("td",null,[(0,o.Wm)(a.h,{outlined:"",class:"gray-text-field",rules:S.costRules,modelValue:S.publicCosts[e].cost,"onUpdate:modelValue":t=>S.publicCosts[e].cost=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,o._)("td",null,[(0,o.Wm)(a.h,{outlined:"",class:"gray-text-field",rules:S.costNoteRules,modelValue:S.publicCosts[e].costNote,"onUpdate:modelValue":t=>S.publicCosts[e].costNote=t},null,8,["rules","modelValue","onUpdate:modelValue"])])],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("td",g,(0,l.zw)(t.costOrder),1),(0,o._)("td",f,(0,l.zw)(t.costUse),1),(0,o._)("td",C,(0,l.zw)(t.cost.toLocaleString()),1),(0,o._)("td",null,(0,l.zw)(t.costNote),1)],64))])))),128)),S.publicCosts.length>0?((0,o.wg)(),(0,o.iD)("tr",y,[w,m,(0,o._)("td",N,[(0,o._)("strong",null,(0,l.zw)(S.publicCostSum),1)])])):(0,o.kq)("",!0)])])),_:1},8,["height"])])),_:1})}s(7658);var k={components:{},created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession"),sessionStorage.getItem("projectNoSession")?this.tripProjectNo=sessionStorage.getItem("projectNoSession"):this.tripProjectNo="c5bf464bf576",sessionStorage.getItem("userNoSession")?this.tripUserNo=sessionStorage.getItem("userNoSession"):this.tripUserNo="3bb8aff388ab"},mounted(){this.costShow()},data(){return{isEditing:!1,publicCosts:[],publicCostSum:0,costUseRules:[t=>!(t&&t.length>10)||"사용처 입력은 최대 10글자까지 가능합니다.( "+t.length+"글자 )"],costRules:[t=>/^[0-9]*$/.test(t)||"숫자만 입력 가능합니다."],costNoteRules:[t=>!(t&&t.length>30)||"메모 입력은 최대 30글자까지 가능합니다.( "+t.length+"글자 )"],tripSaveCost:[],tripUdpateCost:[],tripDeleteCost:[]}},methods:{costShow(){const t={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/cost/public/info/list",{params:t}).then((t=>{console.log("costShow",t);let e=0;this.publicCosts=t.data.map((t=>(e+=parseInt(t.tripPublicCost),{costNo:t.tripPublicCostNo,costOrder:t.tripPublicCostOrder,costUse:t.tripPublicCostUse,cost:t.tripPublicCost,costNote:t.tripPublicCostNote}))),this.publicCostSum=e.toLocaleString()})).catch((t=>{console.log(t)})).finally((()=>{this.isEditing=!1}))},costModify(){this.isEditing=!0},async deleteCost(){try{console.log("this.tripDeleteCost",this.tripDeleteCost),await this.$axios.delete("/trip/cost/public/info",{data:this.tripDeleteCost}),console.log("Delete request completed.")}catch(t){console.log("Error during delete request:",t)}finally{this.tripDeleteCost=[],this.costShow()}},async updateCost(){try{await this.$axios.put("/trip/cost/public/info/list",this.tripUdpateCost),console.log("Update request completed.")}catch(t){console.log("Error during update request:",t)}finally{this.tripUdpateCost=[],this.costShow()}},async saveCost(){try{await this.$axios.post("/trip/cost/public/info",this.tripSaveCost),console.log("Save request completed.")}catch(t){console.log("Error during save request:",t)}finally{this.tripSaveCost=[],this.costShow()}},async executeRequests(){await this.deleteCost(),await this.updateCost(),await this.saveCost()},costSave(){let t="";this.publicCosts.forEach((e=>{t=""!=e.costOrder?e.costOrder:"",console.log("tripPublicCostOrder",t),console.log("e.cost",e.cost),""!=t?this.tripUdpateCost.push({tripProjectNo:this.tripProjectNo,tripPublicCost:{tripPublicCostNo:e.costNo,tripPublicCostOrder:t,tripPublicCostUse:e.costUse,tripPublicCost:e.cost,tripPublicCostNote:e.costNote}}):this.tripSaveCost.push({tripProjectNo:this.tripProjectNo,tripPublicCost:{tripPublicCostNo:e.costNo,tripPublicCostUse:e.costUse,tripPublicCost:e.cost,tripPublicCostNote:e.costNote}})})),this.executeRequests(),this.isEditing=!1},costReset(){this.publicCosts=[]},addRow(){this.publicCosts.push({costNo:"",costOrder:"",costUse:"",cost:"",costNote:""})},removeRow(){if(this.publicCosts.length>0){const t=this.publicCosts.slice(-1)[0],e=t.costOrder;""!=e&&(this.tripDeleteCost.push({tripProjectNo:this.tripProjectNo,tripPublicCostNo:t.costNo,tripPublicCostOrder:e}),console.log("this.tripDeleteCost",this.tripDeleteCost)),this.publicCosts.pop()}}}},v=s(89);const _=(0,v.Z)(k,[["render",S],["__scopeId","data-v-c93b2d46"]]);var U=_},8521:function(t,e,s){s.d(e,{D:function(){return b}});s(7658),s(8099);var o=s(9166),l=s(8157),i=s(1138),c=s(7139),n=s(3396),r=s(3766),u=s(1107);const a=(()=>l.AV.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),d=(()=>l.AV.reduce(((t,e)=>{const s="offset"+(0,c.kC)(e);return t[s]={type:[String,Number],default:null},t}),{}))(),p=(()=>l.AV.reduce(((t,e)=>{const s="order"+(0,c.kC)(e);return t[s]={type:[String,Number],default:null},t}),{}))(),h={col:Object.keys(a),offset:Object.keys(d),order:Object.keys(p)};function g(t,e,s){let o=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");o+=`-${s}`}return"col"===t&&(o="v-"+o),"col"!==t||""!==s&&!0!==s?(o+=`-${s}`,o.toLowerCase()):o.toLowerCase()}}const f=["auto","start","end","center","baseline","stretch"],C=(0,r.U)({cols:{type:[Boolean,String,Number],default:!1},...a,offset:{type:[String,Number],default:null},...d,order:{type:[String,Number],default:null},...p,alignSelf:{type:String,default:null,validator:t=>f.includes(t)},...(0,o.l)(),...(0,i.Q)()},"VCol"),b=(0,u.ev)()({name:"VCol",props:C(),setup(t,e){let{slots:s}=e;const o=(0,n.Fl)((()=>{const e=[];let s;for(s in h)h[s].forEach((o=>{const l=t[o],i=g(s,o,l);i&&e.push(i)}));const o=e.some((t=>t.startsWith("v-col-")));return e.push({"v-col":!o||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),e}));return()=>(0,n.h)(t.tag,{class:[o.value,t.class],style:t.style},s.default?.())}})},6824:function(t,e,s){s.d(e,{o:function(){return U}});s(7658),s(8099);var o=s(9166),l=s(8157),i=s(1138),c=s(7139),n=s(3396),r=s(3766),u=s(1107);const a=["start","end","center"],d=["space-between","space-around","space-evenly"];function p(t,e){return l.AV.reduce(((s,o)=>{const l=t+(0,c.kC)(o);return s[l]=e(),s}),{})}const h=[...a,"baseline","stretch"],g=t=>h.includes(t),f=p("align",(()=>({type:String,default:null,validator:g}))),C=[...a,...d],b=t=>C.includes(t),y=p("justify",(()=>({type:String,default:null,validator:b}))),w=[...a,...d,"stretch"],m=t=>w.includes(t),N=p("alignContent",(()=>({type:String,default:null,validator:m}))),S={align:Object.keys(f),justify:Object.keys(y),alignContent:Object.keys(N)},k={align:"align",justify:"justify",alignContent:"align-content"};function v(t,e,s){let o=k[t];if(null!=s){if(e){const s=e.replace(t,"");o+=`-${s}`}return o+=`-${s}`,o.toLowerCase()}}const _=(0,r.U)({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:g},...f,justify:{type:String,default:null,validator:b},...y,alignContent:{type:String,default:null,validator:m},...N,...(0,o.l)(),...(0,i.Q)()},"VRow"),U=(0,u.ev)()({name:"VRow",props:_(),setup(t,e){let{slots:s}=e;const o=(0,n.Fl)((()=>{const e=[];let s;for(s in S)S[s].forEach((o=>{const l=t[o],i=v(s,o,l);i&&e.push(i)}));return e.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),e}));return()=>(0,n.h)(t.tag,{class:["v-row",o.value,t.class],style:t.style},s.default?.())}})}}]);
//# sourceMappingURL=552.cefd076c.js.map