"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[336],{5336:function(e,t,o){o.r(t),o.d(t,{default:function(){return L}});var a=o(3396),s=o(9242),l=o(7139),i=o(5101),n=o(3601),r=o(6422),c=o(3369),d=o(6824),u=o(8521),h=o(3289),m=o(8694),p=o(2329),g=o(8777),f=o(3173),v=o(4039),A=o(5869);const w=e=>((0,a.dD)("data-v-19527dc9"),e=e(),(0,a.Cn)(),e),y=w((()=>(0,a._)("div",{class:"title"},"지역 선택",-1))),k={class:"search-title-text"},b=["innerHTML"],F={class:"search-addr-text"},K={class:"search-text"},C={key:1,class:"no-results-container"},S={class:"no-results-overlay"},U={key:0,class:"no-results-text"},W={key:1,class:"no-results-text"},T={key:2};function x(e,t,o,w,x,D){return(0,a.wg)(),(0,a.j4)(n.B,{class:"custom-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(c.K,{class:"custom-container"},{default:(0,a.w5)((()=>[(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a._)("div",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>D.closeModal&&D.closeModal(...e))},[(0,a.Wm)(h.t,null,{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-close")])),_:1})])])),_:1}),(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,null,{default:(0,a.w5)((()=>[y])),_:1})])),_:1}),(0,a.Wm)(d.o,{class:"main-board"},{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r.O,{ref:"form","lazy-validation":""},{default:(0,a.w5)((()=>[(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,{cols:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(v.rL,{modelValue:x.selectedSi,"onUpdate:modelValue":t[1]||(t[1]=e=>x.selectedSi=e),items:x.regionSi,"item-title":"name","item-value":"code",label:"지역(시) 선택",rules:x.regionSiRules},null,8,["modelValue","items","rules"])])),_:1}),(0,a.Wm)(u.D,{cols:"6",md:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(v.rL,{modelValue:x.selectedGu,"onUpdate:modelValue":t[2]||(t[2]=e=>x.selectedGu=e),items:x.regionGu,"item-title":"name","item-value":"code",disabled:!x.selectedSi,label:"지역(구) 선택"},null,8,["modelValue","items","disabled"])])),_:1})])),_:1}),(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,{cols:"12",md:"11"},{default:(0,a.w5)((()=>[(0,a.Wm)(A.h,{modelValue:x.searchKeyword,"onUpdate:modelValue":t[3]||(t[3]=e=>x.searchKeyword=e),label:"검색어",rules:x.keywordRules,onKeyup:t[4]||(t[4]=(0,s.D2)((e=>D.search(x.searchKeyword)),["enter"]))},null,8,["modelValue","rules"])])),_:1}),(0,a.Wm)(u.D,{cols:"12",md:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(i.T,{onClick:t[5]||(t[5]=e=>D.search(x.searchKeyword)),size:"x-large",class:"button-style center-button"},{default:(0,a.w5)((()=>[(0,a.Uk)("검색")])),_:1})])),_:1})])),_:1})])),_:1},512),(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,null,{default:(0,a.w5)((()=>[x.searchResults&&x.searchResults.length>0?((0,a.wg)(),(0,a.j4)(p.i,{key:0,style:{height:"300px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.searchResults,((e,t)=>((0,a.wg)(),(0,a.j4)(g.l,{key:t,class:"search-item",onClick:t=>D.itemClick(e.searchTitle)},{default:(0,a.w5)((()=>[(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u.D,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(m.f,{src:e.imageUrl,"max-height":"100px","max-width":"200px",onError:D.replaceImg,cover:""},null,8,["src","onError"])])),_:2},1024),(0,a.Wm)(u.D,{cols:"10"},{default:(0,a.w5)((()=>[(0,a.Wm)(d.o,{class:"search-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(h.t,{onClick:(0,s.iM)((o=>D.toggleBookmark(e,t)),["stop"]),color:e.bookmarked?"yellow":"grey"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.bookmarked?"mdi-star":"mdi-star-outline"),1)])),_:2},1032,["onClick","color"]),(0,a._)("div",k,[(0,a._)("span",{innerHTML:e.searchTitle},null,8,b)]),(0,a._)("div",F," ("+(0,l.zw)(e.addr)+")",1)])),_:2},1024),(0,a.Wm)(d.o,null,{default:(0,a.w5)((()=>[(0,a._)("div",K,(0,l.zw)(D.truncateText(e.overview,260)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",S,[!x.isLoading&&x.enterFavorits?((0,a.wg)(),(0,a.iD)("span",U,"검색 결과가 없습니다.")):(0,a.kq)("",!0),x.isLoading||x.enterFavorits?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",W,"검색 결과를 클릭하여 장소를 선택 해주세요.")),x.isLoading?((0,a.wg)(),(0,a.iD)("span",T,[(0,a.Wm)(f.L,{indeterminate:"",color:"black"})])):(0,a.kq)("",!0)])]))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}o(7658);var D={name:"TripScheduleModal",components:{},watch:{selectedSi:function(e){this.changeSi(e)},selectedGu:function(e){this.changeGu(e)}},created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession")},mounted(){this.searchMetaRegion(),this.getFavorites()},data(){return{tripProjectNo:"",tripUserNo:"",isLoading:!1,enterFavorits:!1,selectedSi:"",selectedGu:"",siCode:"",guCode:"",regionSi:[],regionDong:[],regionGu:[],searchKeyword:"",cacheHtmlContent:null,searchResults:[],searchContents:[],favorits:[],regionSiRules:[e=>!!e||"지역(시)를 선택해 주시길 바랍니다."],keywordRules:[e=>!!e||"검색어를 입력해 주시길 바랍니다."],currentRowIndex:"",currentRowKey:""}},methods:{showModal(e,t){this.currentRowIndex=e,this.currentRowKey=t},itemClick(e){console.log(e),this.$emit("submitTitle",e,this.currentRowIndex,this.currentRowKey)},closeModal(){this.$emit("closeModal")},truncateText(e,t){if(null!=e)return e.length>t?e.slice(0,t)+"...":e},replaceImg(e){e.target.src=o(2822)},changeGu(e){this.guCode=e},changeSi(e){this.regionGu=[],this.siCode=e,this.searchMetaRegion(e),console.log("selected",e)},searchMetaRegion(e){let t="https://apis.data.go.kr/B551011/KorService1/areaCode1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=AppTest&_type=json";null!=e&&(t="https://apis.data.go.kr/B551011/KorService1/areaCode1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=AppTest&_type=json&areaCode="+e),this.$axios.get(t,{}).then((t=>{console.log("response",t.data.response.body.items.item);let o=t.data.response.body.items.item;null==e?this.regionSi=[...this.regionSi,...o]:this.regionGu=[{rnum:0,code:"",name:"전체"},...this.regionGu,...o]})).catch((e=>{console.log(e)}))},checkRegionSi(e){if(console.log("value",e),""==e||null==e)return"지역(시)를 선택해 주시길 바랍니다."},async search(e){await this.$refs.form.validate().then((async t=>{if(t.valid){this.enterFavorits=!0,this.isLoading=!0,this.searchResults=[],this.cachedHtmlContent=null;let t="https://apis.data.go.kr/B551011/KorService1/searchKeyword1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=OQPlanner&_type=json&listYN=Y&arrange=A&contentTypeId=12&keyword="+e;try{let e=await this.$axios.get(t),o=e.data.response.body.items.item;console.log("array",o);let a=[];a=o.map((e=>({contentid:e.contentid,areacode:e.areacode}))),console.log("midArray",a);let s=!1;for(let t=0;t<a.length;t++){let e="https://apis.data.go.kr/B551011/KorService1/detailCommon1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&MobileOS=ETC&MobileApp=OQPlanner&_type=json&defaultYN=Y&overviewYN=Y&firstImageYN=Y&areacodeYN=Y&addrinfoYN=Y&contentId="+a[t].contentid,o=await this.$axios.get(e);if(console.log("detailResponse",o),!Array.isArray(o.data)){s=!0;break}let l=o.data.response.body.items.item;l.forEach((e=>{let t=!1;this.siCode!==e.areacode||this.guCode&&this.guCode!==e.sigungucode||(this.favorits.forEach((o=>{o.contentid===e.contentid&&(t=!0)})),this.searchResults.push({contentid:e.contentid,bookmarked:t,imageUrl:e.firstimage||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.title,addr:e.addr1,siCode:e.areacode,guCode:e.sigungucode,overview:e.overview}))}))}s&&o.forEach((e=>{let t=!1;this.siCode!==e.areacode||this.guCode&&this.guCode!==e.sigungucode||(this.favorits.forEach((o=>{o.contentid===e.contentid&&(t=!0)})),this.searchResults.push({contentid:e.contentid,bookmarked:t,imageUrl:e.firstimage||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.title,addr:e.addr1,siCode:e.areacode,guCode:e.sigungucode,overview:e.overview}))}))}catch(o){console.log(o)}finally{this.isLoading=!1}}}))},getFavorites(){this.favorits=[];let e={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/favorites/info",{params:e}).then((e=>{console.log("response",e),e.data.forEach((e=>this.favorits.push({contentid:e.tripFavoritesOutId,imageUrl:e.tripFavoritesImgUrl||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.tripFavoritesNm})))})).catch((e=>{console.error(e)}))},toggleBookmark(e){console.log("result",e);let t={tripProjectNo:this.tripProjectNo,tripFavoritesNm:e.searchTitle,tripFavoritesExplan:null==e.overview?"":e.overview,tripFavoritesOutId:e.contentid,tripFavoritesImgUrl:e.imageUrl};e.bookmarked?this.$axios.delete("/trip/favorites/info",{data:t}).then((()=>{for(let t=0;t<this.favorits.length;t++)console.log("this.favorits[i].contentid",this.favorits[t].contentid),console.log("result.contentid",e.contentid),this.favorits[t].contentid==e.contentid&&this.favorits.splice(t,1)})).catch((()=>{})):this.$axios.post("/trip/favorites/info",t).then((()=>{this.favorits.push(e)})).catch((e=>{console.error(e)})),e.bookmarked=!e.bookmarked}}},P=o(89);const R=(0,P.Z)(D,[["render",x],["__scopeId","data-v-19527dc9"]]);var L=R},2822:function(e){e.exports="data:image/png;base64,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"},3601:function(e,t,o){o.d(t,{B:function(){return v}});var a=o(3396),s=o(2583),l=o(836),i=o(292),n=o(3185),r=o(8717),c=o(5975),d=o(4870),u=o(3766),h=o(1107),m=o(131),p=o(2385),g=o(9888);const f=(0,u.U)({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...(0,i.B)({origin:"center center",scrollStrategy:"block",transition:{component:s.v},zIndex:2400})},"VDialog"),v=(0,h.ev)()({name:"VDialog",props:f(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const s=(0,r.z)(e,"modelValue"),{scopeId:u}=(0,c.a)(),h=(0,d.iH)();function f(e){const t=e.relatedTarget,o=e.target;if(t!==o&&h.value?.contentEl&&h.value?.globalTop&&![document,h.value.contentEl].includes(o)&&!h.value.contentEl.contains(o)){const e=(0,m.ef)(h.value.contentEl);if(!e.length)return;const o=e[0],a=e[e.length-1];t===o?a.focus():o.focus()}}p.BR&&(0,a.YP)((()=>s.value&&e.retainFocus),(e=>{e?document.addEventListener("focusin",f):document.removeEventListener("focusin",f)}),{immediate:!0}),(0,a.YP)(s,(async e=>{await(0,a.Y3)(),e?h.value.contentEl?.focus({preventScroll:!0}):h.value.activatorEl?.focus({preventScroll:!0})}));const v=(0,a.Fl)((()=>(0,a.dG)({"aria-haspopup":"dialog","aria-expanded":String(s.value)},e.activatorProps)));return(0,g.L)((()=>{const[t]=i.y.filterProps(e);return(0,a.Wm)(i.y,(0,a.dG)({ref:h,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,"aria-modal":"true",activatorProps:v.value,role:"dialog"},u),{activator:o.activator,default:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.Wm)(l.z,{root:"VDialog"},{default:()=>[o.default?.(...t)]})}})})),(0,n.F)({},h)}})},6422:function(e,t,o){o.d(t,{O:function(){return h}});var a=o(3396),s=o(9166),l=o(4357),i=o(3185),n=o(4870),r=o(3766),c=o(1107),d=o(9888);const u=(0,r.U)({...(0,s.l)(),...(0,l.vC)()},"VForm"),h=(0,c.ev)()({name:"VForm",props:u(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:o,emit:s}=t;const r=(0,l.Np)(e),c=(0,n.iH)();function u(e){e.preventDefault(),r.reset()}function h(e){const t=e,o=r.validate();t.then=o.then.bind(o),t.catch=o.catch.bind(o),t.finally=o.finally.bind(o),s("submit",t),t.defaultPrevented||o.then((e=>{let{valid:t}=e;t&&c.value?.submit()})),t.preventDefault()}return(0,d.L)((()=>(0,a.Wm)("form",{ref:c,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:u,onSubmit:h},[o.default?.(r)]))),(0,i.F)(r,c)}})}}]);
//# sourceMappingURL=336.e229a0bf.js.map