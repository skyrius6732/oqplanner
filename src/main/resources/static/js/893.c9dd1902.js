"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[893],{893:function(t,e,o){o.r(e),o.d(e,{default:function(){return x}});var s=o(3396),i=o(7139),l=o(5101),a=o(3601),r=o(3369),n=o(6824),c=o(8521),p=o(3289),u=o(4413),d=o(5869);const h=t=>((0,s.dD)("data-v-86af912c"),t=t(),(0,s.Cn)(),t),m={class:"subtitle-detail"},v=h((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-center",style:{width:"10%"}},"NO."),(0,s._)("th",{class:"text-center",style:{width:"14%"}},"사용처"),(0,s._)("th",{class:"text-center",style:{width:"13%"}},"비용(원)"),(0,s._)("th",{class:"text-center",style:{width:"65%"}},"메모")])],-1))),C={class:"text-center"},g={class:"text-center"},f={class:"text-center"},N={class:"text-center"},w={key:0},P=h((()=>(0,s._)("td",{class:"text-center"},"합계",-1))),y=h((()=>(0,s._)("td",null,null,-1))),_={class:"text-center"};function U(t,e,o,h,U,k){return(0,s.wg)(),(0,s.j4)(a.B,{class:"custom-dialog"},{default:(0,s.w5)((()=>[(0,s.Wm)(r.K,{class:"custom-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(n.o,null,{default:(0,s.w5)((()=>[(0,s._)("div",{class:"close-button",onClick:e[0]||(e[0]=(...t)=>k.closeDialog&&k.closeDialog(...t))},[(0,s.Wm)(p.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-close")])),_:1})])])),_:1}),(0,s.Wm)(n.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("span",m,(0,i.zw)(U.tripCompanionNm)+"의 개인 비용",1)])])),_:1}),U.isEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(c.D,{key:0,style:{width:"80px","text-align":"right"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l.T,{onClick:k.costModify,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 수정")])),_:1},8,["onClick"])])),_:1})),U.isEditing?((0,s.wg)(),(0,s.j4)(c.D,{key:1,style:{width:"80px","text-align":"right"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l.T,{onClick:k.addRow,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Wm)(p.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.removeRow,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Wm)(p.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-minus")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.costReset,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 초기화")])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.costSave,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 저장")])),_:1},8,["onClick"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(u.Y,{"fixed-header":"",height:550,style:{width:"100%"},class:"custom-table"},{default:(0,s.w5)((()=>[v,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(U.privateCosts,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.name},[U.isEditing?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("td",N,(0,i.zw)(t.costOrder),1),(0,s._)("td",null,[(0,s.Wm)(d.h,{outlined:"",class:"gray-text-field",rules:U.costUseRules,modelValue:U.privateCosts[e].costUse,"onUpdate:modelValue":t=>U.privateCosts[e].costUse=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,s._)("td",null,[(0,s.Wm)(d.h,{outlined:"",class:"gray-text-field",rules:U.costRules,modelValue:U.privateCosts[e].cost,"onUpdate:modelValue":t=>U.privateCosts[e].cost=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,s._)("td",null,[(0,s.Wm)(d.h,{outlined:"",class:"gray-text-field",rules:U.costNoteRules,modelValue:U.privateCosts[e].costNote,"onUpdate:modelValue":t=>U.privateCosts[e].costNote=t},null,8,["rules","modelValue","onUpdate:modelValue"])])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("td",C,(0,i.zw)(t.costOrder),1),(0,s._)("td",g,(0,i.zw)(t.costUse),1),(0,s._)("td",f,(0,i.zw)(t.cost.toLocaleString()),1),(0,s._)("td",null,(0,i.zw)(t.costNote),1)],64))])))),128)),U.privateCosts.length>0?((0,s.wg)(),(0,s.iD)("tr",w,[P,y,(0,s._)("td",_,[(0,s._)("strong",null,(0,i.zw)(U.privateCostSum),1)])])):(0,s.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1})}o(7658);var k={components:{},name:"TripPrivateCostDetail",created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession")},mounted(){this.emitter.on("submitPrivateDetail",(t=>{this.tripCompanionNm=t.companionNm,this.tripCompanionNo=t.companionNo,this.costShow(),console.log("this.companionNo",this.tripCompanionNo)}))},data(){return{isEditing:!1,tripCompanionNm:"",tripCompanionNo:"",privateCostSum:0,privateCosts:[{companionNo:"",companionNm:"",tripPrivatCostList:[{costNo:"",costOrder:"",costUse:"",cost:0,costNote:""}]}],tripSaveCost:[],tripUdpateCost:[],tripDeleteCost:[],costUseRules:[t=>!(t&&t.length>10)||"사용처 입력은 최대 10글자까지 가능합니다.( "+t.length+"글자 )"],costRules:[t=>/^[0-9]*$/.test(t)||"숫자만 입력 가능합니다."],costNoteRules:[t=>!(t&&t.length>30)||"메모 입력은 최대 30글자까지 가능합니다.( "+t.length+"글자 )"]}},methods:{costModify(){this.isEditing=!0},costShow(){this.privateCosts=[],this.privateCostSum=0;const t={tripProjectNo:this.tripProjectNo,tripCompanionNo:this.tripCompanionNo};this.$axios.get("/trip/cost/private/info/list",{params:t}).then((t=>{let e=0;t.data&&t.data.length>0&&t.data[0].tripPrivateCostList&&(this.privateCosts=t.data[0].tripPrivateCostList.map((t=>(e+=parseInt(t.tripPrivateCost),{costNo:t.tripPrivateCostNo,costOrder:t.tripPrivateCostOrder,costUse:t.tripPrivateCostUse,cost:t.tripPrivateCost,costNote:t.tripPrivateCostNote}))),this.privateCostSum=e.toLocaleString())})).catch((t=>{console.log(t)})).finally((()=>{console.log("costShow this.privateCosts",this.privateCosts),this.isEditing=!1}))},async deleteCost(){try{console.log("this.tripDeleteCost",this.tripDeleteCost),await this.$axios.delete("/trip/cost/private/info",{data:this.tripDeleteCost}),console.log("Delete request completed.")}catch(t){console.log("Error during delete request:",t)}finally{this.tripDeleteCost=[],this.costShow()}},async updateCost(){try{await this.$axios.put("/trip/cost/private/info/list",this.tripUdpateCost),console.log("Update request completed.")}catch(t){console.log("Error during update request:",t)}finally{this.tripUdpateCost=[],this.costShow()}},async saveCost(){try{await this.$axios.post("/trip/cost/private/info",this.tripSaveCost),console.log("Save request completed.")}catch(t){console.log("Error during save request:",t)}finally{this.tripSaveCost=[],this.costShow()}},async executeRequests(){await this.deleteCost(),await this.updateCost(),await this.saveCost(),this.emitter.emit("callPrivateCostCostShow")},costSave(){let t="";this.privateCosts.forEach((e=>{t=""!=e.costOrder?e.costOrder:"",console.log("tripPrivateCostOrder",t),console.log("e.cost",e.cost),console.log("tripCompanionNo",this.tripCompanionNo),""!=t?this.tripUdpateCost.push({tripProjectNo:this.tripProjectNo,tripPrivateCost:{tripPrivateCostNo:e.costNo,tripCompanionNo:this.tripCompanionNo,tripPrivateCostOrder:t,tripPrivateCostUse:e.costUse,tripPrivateCost:e.cost,tripPrivateCostNote:e.costNote}}):this.tripSaveCost.push({tripProjectNo:this.tripProjectNo,tripPrivateCost:{tripPrivateCostNo:e.costNo,tripCompanionNo:this.tripCompanionNo,tripPrivateCostUse:e.costUse,tripPrivateCost:e.cost,tripPrivateCostNote:e.costNote}})})),this.executeRequests(),this.isEditing=!1},costReset(){this.privateCosts.forEach((t=>{this.tripDeleteCost.push({tripProjectNo:this.tripProjectNo,tripPrivateCostNo:t.costNo,tripPrivateCostOrder:t.costOrder})})),this.privateCosts=[]},addRow(){this.privateCosts.push({costNo:"",costOrder:"",companionNo:this.companionNo,companionNm:this.companionNm,costUse:"",cost:"",costNote:""})},removeRow(){if(this.privateCosts.length>1){const t=this.privateCosts.slice(-1)[0],e=t.costOrder;""!=e&&(this.tripDeleteCost.push({tripProjectNo:this.tripProjectNo,tripPrivateCostNo:t.costNo,tripPrivateCostOrder:e}),console.log("this.tripDeleteCost",this.tripDeleteCost)),this.privateCosts.pop()}},allReset(){},closeDialog(){this.$emit("closeDialog")}}},D=o(89);const S=(0,D.Z)(k,[["render",U],["__scopeId","data-v-86af912c"]]);var x=S},3601:function(t,e,o){o.d(e,{B:function(){return g}});var s=o(3396),i=o(2583),l=o(836),a=o(292),r=o(3185),n=o(8717),c=o(5975),p=o(4870),u=o(3766),d=o(1107),h=o(131),m=o(2385),v=o(9888);const C=(0,u.U)({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...(0,a.B)({origin:"center center",scrollStrategy:"block",transition:{component:i.v},zIndex:2400})},"VDialog"),g=(0,d.ev)()({name:"VDialog",props:C(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:o}=e;const i=(0,n.z)(t,"modelValue"),{scopeId:u}=(0,c.a)(),d=(0,p.iH)();function C(t){const e=t.relatedTarget,o=t.target;if(e!==o&&d.value?.contentEl&&d.value?.globalTop&&![document,d.value.contentEl].includes(o)&&!d.value.contentEl.contains(o)){const t=(0,h.ef)(d.value.contentEl);if(!t.length)return;const o=t[0],s=t[t.length-1];e===o?s.focus():o.focus()}}m.BR&&(0,s.YP)((()=>i.value&&t.retainFocus),(t=>{t?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)}),{immediate:!0}),(0,s.YP)(i,(async t=>{await(0,s.Y3)(),t?d.value.contentEl?.focus({preventScroll:!0}):d.value.activatorEl?.focus({preventScroll:!0})}));const g=(0,s.Fl)((()=>(0,s.dG)({"aria-haspopup":"dialog","aria-expanded":String(i.value)},t.activatorProps)));return(0,v.L)((()=>{const[e]=a.y.filterProps(t);return(0,s.Wm)(a.y,(0,s.dG)({ref:d,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},e,{modelValue:i.value,"onUpdate:modelValue":t=>i.value=t,"aria-modal":"true",activatorProps:g.value,role:"dialog"},u),{activator:o.activator,default:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,s.Wm)(l.z,{root:"VDialog"},{default:()=>[o.default?.(...e)]})}})})),(0,r.F)({},d)}})}}]);
//# sourceMappingURL=893.c9dd1902.js.map