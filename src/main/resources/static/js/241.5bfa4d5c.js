"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[241],{8241:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});var s=o(3396),a=o(9242),i=o(7139),l=o(5101),r=o(6422),n=o(3369),d=o(6824),c=o(8521),u=o(3289),h=o(8694),m=o(2329),g=o(8777),p=o(3173),A=o(4039),f=o(5869);const v=e=>((0,s.dD)("data-v-82735458"),e=e(),(0,s.Cn)(),e),w=v((()=>(0,s._)("div",{class:"subtitle-detail"},"지역 선택",-1))),k={class:"search-title-text"},y=["innerHTML"],b={class:"search-addr-text"},F={class:"search-text"},S={key:1,class:"no-results-container"},K={class:"no-results-overlay"},U={key:0,class:"no-results-text"},W={key:1},C=v((()=>(0,s._)("div",{class:"subtitle-detail"},"즐겨찾기",-1))),x={style:{position:"relative"}};function D(e,t,o,v,D,T){const N=(0,s.up)("row");return(0,s.wg)(),(0,s.j4)(n.K,{class:"custom-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,{cols:"10"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[w])),_:1})])),_:1}),(0,s.Wm)(r.O,{ref:"form","lazy-validation":""},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A.rL,{modelValue:D.selectedSi,"onUpdate:modelValue":t[0]||(t[0]=e=>D.selectedSi=e),items:D.regionSi,"item-title":"name","item-value":"code",label:"지역(시) 선택",rules:D.regionSiRules},null,8,["modelValue","items","rules"])])),_:1}),(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A.rL,{modelValue:D.selectedGu,"onUpdate:modelValue":t[1]||(t[1]=e=>D.selectedGu=e),items:D.regionGu,"item-title":"name","item-value":"code",disabled:!D.selectedSi,label:"지역(구) 선택"},null,8,["modelValue","items","disabled"])])),_:1})])),_:1}),(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,{cols:"11"},{default:(0,s.w5)((()=>[(0,s.Wm)(f.h,{modelValue:D.searchKeyword,"onUpdate:modelValue":t[2]||(t[2]=e=>D.searchKeyword=e),label:"검색어",rules:D.keywordRules,onKeyup:t[3]||(t[3]=(0,a.D2)((e=>T.search(D.searchKeyword)),["enter"]))},null,8,["modelValue","rules"])])),_:1}),(0,s.Wm)(c.D,{cols:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(l.T,{onClick:t[4]||(t[4]=e=>T.search(D.searchKeyword)),size:"x-large",class:"button-style center-button"},{default:(0,s.w5)((()=>[(0,s.Uk)("검색")])),_:1})])),_:1})])),_:1})])),_:1},512),(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[D.searchResults&&D.searchResults.length>0?((0,s.wg)(),(0,s.j4)(m.i,{key:0,style:{height:"470px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.searchResults,((e,t)=>((0,s.wg)(),(0,s.j4)(g.l,{key:t,class:"search-item"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,{cols:"2"},{default:(0,s.w5)((()=>[(0,s.Wm)(h.f,{src:e.imageUrl,"max-height":"100px","max-width":"200px",onError:T.replaceImg,cover:""},null,8,["src","onError"])])),_:2},1024),(0,s.Wm)(c.D,{cols:"10"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,{class:"search-title"},{default:(0,s.w5)((()=>[(0,s.Wm)(u.t,{onClick:o=>T.toggleBookmark(e,t),color:e.bookmarked?"yellow":"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.bookmarked?"mdi-star":"mdi-star-outline"),1)])),_:2},1032,["onClick","color"]),(0,s._)("div",k,[(0,s._)("span",{innerHTML:e.searchTitle},null,8,y)]),(0,s._)("div",b," ("+(0,i.zw)(e.addr)+")",1)])),_:2},1024),(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s._)("div",F,(0,i.zw)(T.truncateText(e.overview,260)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):((0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",K,[D.isLoading||0!=D.enterFavorits?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",U,"검색 결과가 없습니다.")),D.isLoading?((0,s.wg)(),(0,s.iD)("span",W,[(0,s.Wm)(p.L,{indeterminate:"",color:"black"})])):(0,s.kq)("",!0)])]))])),_:1})])),_:1})])),_:1}),(0,s.Wm)(c.D,{cols:"2"},{default:(0,s.w5)((()=>[(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,null,{default:(0,s.w5)((()=>[C])),_:1})])),_:1}),(0,s.Wm)(d.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c.D,{class:"overlay-content"},{default:(0,s.w5)((()=>[(0,s.Wm)(m.i,{style:{height:"675px","overflow-y":"auto"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.favorits,((e,t)=>((0,s.wg)(),(0,s.j4)(g.l,{key:t,class:"search-item"},{default:(0,s.w5)((()=>[(0,s._)("div",x,[(0,s.Wm)(h.f,{src:e.imageUrl,width:"200px","max-height":"120px",onError:T.replaceImg,cover:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u.t,{onClick:o=>T.toggleBookmark(e,t),color:e.bookmarked?"yellow":"grey",style:{position:"absolute",top:"0",left:"0"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.bookmarked?"mdi-star":"mdi-star-outline"),1)])),_:2},1032,["onClick","color"])])),_:2},1032,["src","onError"])]),(0,s.Wm)(N,{class:"favorit-title-text"},{default:(0,s.w5)((()=>[(0,s.Uk)(" ["+(0,i.zw)(e.searchTitle)+"] ",1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}o(7658);var T={name:"TripFavortis",components:{},watch:{selectedSi:function(e){this.changeSi(e)},selectedGu:function(e){this.changeGu(e)}},created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession"),console.log("projectNoSession",sessionStorage.getItem("projectNoSession")),console.log("userNoSession",sessionStorage.getItem("userNoSession"))},mounted(){this.searchMetaRegion(),this.getFavorites()},data(){return{tripProjectNo:"",tripUserNo:"",isLoading:!1,enterFavorits:!0,selectedSi:"",selectedGu:"",siCode:"",guCode:"",regionSi:[],regionDong:[],regionGu:[],searchKeyword:"",cacheHtmlContent:null,searchResults:[],searchContents:[],favorits:[],regionSiRules:[e=>!!e||"지역(시)를 선택해 주시길 바랍니다."],keywordRules:[e=>!!e||"검색어를 입력해 주시길 바랍니다."]}},methods:{truncateText(e,t){if(null!=e)return e.length>t?e.slice(0,t)+"...":e},replaceImg(e){console.log("나오긴하냐??"),e.target.src=o(2822)},changeGu(e){this.guCode=e},changeSi(e){this.regionGu=[],this.siCode=e,this.searchMetaRegion(e),console.log("selected",e)},searchMetaRegion(e){let t="https://apis.data.go.kr/B551011/KorService1/areaCode1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=AppTest&_type=json";null!=e&&(t="https://apis.data.go.kr/B551011/KorService1/areaCode1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=AppTest&_type=json&areaCode="+e),this.$axios.get(t,{}).then((t=>{console.log("response",t.data.response.body.items.item);let o=t.data.response.body.items.item;null==e?this.regionSi=[...this.regionSi,...o]:this.regionGu=[{rnum:0,code:"",name:"전체"},...this.regionGu,...o]})).catch((e=>{console.log(e)}))},checkRegionSi(e){if(console.log("value",e),""==e||null==e)return"지역(시)를 선택해 주시길 바랍니다."},async search(e){await this.$refs.form.validate().then((async t=>{if(t.valid){this.enterFavorits=!0,this.isLoading=!0,this.searchResults=[],this.cachedHtmlContent=null;let t="https://apis.data.go.kr/B551011/KorService1/searchKeyword1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&numOfRows=100&MobileOS=ETC&MobileApp=OQPlanner&_type=json&listYN=Y&arrange=A&contentTypeId=12&keyword="+e;try{let e=await this.$axios.get(t),o=e.data.response.body.items.item;console.log("array",o);let s=[];s=o.map((e=>({contentid:e.contentid,areacode:e.areacode}))),console.log("midArray",s);let a=!1;for(let t=0;t<s.length;t++){let e="https://apis.data.go.kr/B551011/KorService1/detailCommon1?serviceKey=LkNx3nYQrdnGGhcCNgTo9OLqxwL6zlN70%2FPd8VO9UuLid8s8Umjo5tvOjeu7we3nK%2BNSvDWS6ndRvR0Q%2F4gP2w%3D%3D&MobileOS=ETC&MobileApp=OQPlanner&_type=json&defaultYN=Y&overviewYN=Y&firstImageYN=Y&areacodeYN=Y&addrinfoYN=Y&contentId="+s[t].contentid,o=await this.$axios.get(e);if(console.log("detailResponse",o),!Array.isArray(o.data)){a=!0;break}let i=o.data.response.body.items.item;i.forEach((e=>{let t=!1;this.siCode!==e.areacode||this.guCode&&this.guCode!==e.sigungucode||(this.favorits.forEach((o=>{o.contentid===e.contentid&&(t=!0)})),this.searchResults.push({contentid:e.contentid,bookmarked:t,imageUrl:e.firstimage||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.title,addr:e.addr1,siCode:e.areacode,guCode:e.sigungucode,overview:e.overview}))}))}a&&o.forEach((e=>{let t=!1;this.siCode!==e.areacode||this.guCode&&this.guCode!==e.sigungucode||(this.favorits.forEach((o=>{o.contentid===e.contentid&&(t=!0)})),this.searchResults.push({contentid:e.contentid,bookmarked:t,imageUrl:e.firstimage||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.title,addr:e.addr1,siCode:e.areacode,guCode:e.sigungucode,overview:e.overview}))})),console.log("this.searchResults",this.searchResults)}catch(o){console.log(o)}finally{this.enterFavorits=!1,this.isLoading=!1}}}))},getFavorites(){this.favorits=[];let e={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/favorites/info",{params:e}).then((e=>{console.log("response",e),e.data.forEach((e=>this.favorits.push({bookmarked:!0,contentid:e.tripFavoritesOutId,imageUrl:e.tripFavoritesImgUrl||"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbnOSHZ%2FbtrLTB8V5DQ%2FnlaUCKg7kzbp7PbVKy63Qk%2Fimg.png",searchTitle:e.tripFavoritesNm})))})).catch((e=>{console.error(e)}))},toggleBookmark(e){console.log("result",e);let t={tripProjectNo:this.tripProjectNo,tripFavoritesNm:e.searchTitle,tripFavoritesExplan:null==e.overview?"":e.overview,tripFavoritesOutId:e.contentid,tripFavoritesImgUrl:e.imageUrl};e.bookmarked?this.$axios.delete("/trip/favorites/info",{data:t}).then((()=>{for(let t=0;t<this.favorits.length;t++)console.log("this.favorits[i].contentid",this.favorits[t].contentid),console.log("result.contentid",e.contentid),this.favorits[t].contentid==e.contentid&&this.favorits.splice(t,1)})).catch((()=>{})):this.$axios.post("/trip/favorites/info",t).then((()=>{this.favorits.push(e)})).catch((e=>{console.error(e)})),e.bookmarked=!e.bookmarked}}},N=o(89);const L=(0,N.Z)(T,[["render",D],["__scopeId","data-v-82735458"]]);var P=L},2822:function(e){e.exports="data:image/png;base64,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"},6422:function(e,t,o){o.d(t,{O:function(){return h}});var s=o(3396),a=o(9166),i=o(4357),l=o(3185),r=o(4870),n=o(3766),d=o(1107),c=o(9888);const u=(0,n.U)({...(0,a.l)(),...(0,i.vC)()},"VForm"),h=(0,d.ev)()({name:"VForm",props:u(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:o,emit:a}=t;const n=(0,i.Np)(e),d=(0,r.iH)();function u(e){e.preventDefault(),n.reset()}function h(e){const t=e,o=n.validate();t.then=o.then.bind(o),t.catch=o.catch.bind(o),t.finally=o.finally.bind(o),a("submit",t),t.defaultPrevented||o.then((e=>{let{valid:t}=e;t&&d.value?.submit()})),t.preventDefault()}return(0,c.L)((()=>(0,s.Wm)("form",{ref:d,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:u,onSubmit:h},[o.default?.(n)]))),(0,l.F)(n,d)}})}}]);
//# sourceMappingURL=241.5bfa4d5c.js.map