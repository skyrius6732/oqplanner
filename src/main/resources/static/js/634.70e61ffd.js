"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[634,355],{8275:function(t,e,o){o.r(e),o.d(e,{default:function(){return q}});var s=o(3396),i=o(5101),l=o(4075),a=o(6422),n=o(3369),c=o(6824),r=o(8521),u=o(4039),p=o(836),d=o(292),m=o(3185),h=o(5180),b=o(489),C=o(8717),g=o(4231),f=o(5975),v=o(5935),w=o(5221),N=o(4870),y=o(3766),k=o(131),_=o(1107),P=o(9888);const S=(0,y.U)({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,h.y)({location:"bottom"}),...(0,b.F)(),...(0,g.I)(),...(0,w.bk)(),...(0,v.x$)(),...(0,k.CE)((0,d.B)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),V=(0,_.ev)()({name:"VSnackbar",props:S(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:o}=e;const i=(0,C.z)(t,"modelValue"),{locationStyles:l}=(0,h.T)(t),{positionClasses:a}=(0,b.K)(t),{scopeId:n}=(0,f.a)(),{themeClasses:c}=(0,v.ER)(t),{colorClasses:r,colorStyles:u,variantClasses:y}=(0,w.c1)(t),{roundedClasses:k}=(0,g.b)(t),_=(0,N.iH)();(0,s.YP)(i,V),(0,s.YP)((()=>t.timeout),V),(0,s.bv)((()=>{i.value&&V()}));let S=-1;function V(){window.clearTimeout(S);const e=Number(t.timeout);i.value&&-1!==e&&(S=window.setTimeout((()=>{i.value=!1}),e))}function U(){window.clearTimeout(S)}return(0,P.L)((()=>{const[e]=d.y.filterProps(t);return(0,s.Wm)(d.y,(0,s.dG)({ref:_,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},a.value,t.class],style:t.style},e,{modelValue:i.value,"onUpdate:modelValue":t=>i.value=t,contentProps:(0,s.dG)({class:["v-snackbar__wrapper",c.value,r.value,k.value,y.value],style:[l.value,u.value],onPointerenter:U,onPointerleave:V},e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},n),{default:()=>[(0,w.Ux)(!1,"v-snackbar"),o.default&&(0,s.Wm)("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[o.default()]),o.actions&&(0,s.Wm)(p.z,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[(0,s.Wm)("div",{class:"v-snackbar__actions"},[o.actions()])]})],activator:o.activator})})),(0,m.F)({},_)}});var U=o(5869);const D={class:"overlay"},x={key:0,class:"no-results-text"};function j(t,e,o,p,d,m){const h=(0,s.up)("TripPublicCost"),b=(0,s.up)("TripPrivateCost"),C=(0,s.up)("TripPrivateCostDetail");return(0,s.wg)(),(0,s.j4)(n.K,{class:"custom-container"},{default:(0,s.w5)((()=>[(0,s.Wm)(a.O,{ref:"form","lazy-validation":""},{default:(0,s.w5)((()=>[(0,s.Wm)(c.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r.D,{class:"m-1"},{default:(0,s.w5)((()=>[(0,s.Wm)(c.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u.rL,{modelValue:d.numberOfCompanions,"onUpdate:modelValue":[e[0]||(e[0]=t=>d.numberOfCompanions=t),m.clickComNumber],items:[1,2,3,4],label:"동행자 수",disabled:d.companionNumDisabled,class:"margin-right"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),(0,s.Wm)(V,{modelValue:d.snackbar,"onUpdate:modelValue":e[1]||(e[1]=t=>d.snackbar=t),timeout:"3000",class:"snackbar-center",flex:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" 동행자 수는 한번 적용 후 변경이 불가하오니 참고 부탁드립니다. ")])),_:1},8,["modelValue"])])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.companions,((t,e)=>((0,s.wg)(),(0,s.j4)(r.D,{key:e,class:"m-1"},{default:(0,s.w5)((()=>[(0,s.Wm)(c.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(U.h,{outlined:"",class:"gray-text-field margin-right",label:`동행자 ${e+1}`,rules:d.companionNameRules,disabled:d.companionNmDisabled,modelValue:t.tripCompanionNm,"onUpdate:modelValue":e=>t.tripCompanionNm=e},null,8,["label","rules","disabled","modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(r.D,{class:"m-4"},{default:(0,s.w5)((()=>[d.companionEdit?((0,s.wg)(),(0,s.j4)(c.o,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(i.T,{onClick:m.companionApply,size:"x-large",class:"apply-button-style center-button"},{default:(0,s.w5)((()=>[(0,s.Uk)("적용")])),_:1},8,["onClick"])])),_:1})):((0,s.wg)(),(0,s.j4)(c.o,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(i.T,{onClick:m.companionModify,class:"button-style center-button"},{default:(0,s.w5)((()=>[(0,s.Uk)("동행자 수정")])),_:1},8,["onClick"]),(0,s.Wm)(i.T,{onClick:m.allReset,class:"button-style center-button"},{default:(0,s.w5)((()=>[(0,s.Uk)("전체 초기화")])),_:1},8,["onClick"])])),_:1}))])),_:1})])),_:1})])),_:1},512),(0,s.Wm)(c.o,{class:"underline-row"},{default:(0,s.w5)((()=>[(0,s.Wm)(r.D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l.J)])),_:1})])),_:1}),d.isOverlayVisible?((0,s.wg)(),(0,s.j4)(c.o,{key:0,onClick:m.hideOverlay},{default:(0,s.w5)((()=>[(0,s._)("div",D,[t.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",x,"적용 버튼을 눌러 여행 비용을 등록 해주세요."))])])),_:1},8,["onClick"])):(0,s.kq)("",!0),d.isCostVisible?((0,s.wg)(),(0,s.j4)(h,{key:1})):(0,s.kq)("",!0),d.isCostVisible?((0,s.wg)(),(0,s.j4)(b,{key:2,companions:d.companions,ref:"privateCostMethod",onViewCost:m.viewCost},null,8,["companions","onViewCost"])):(0,s.kq)("",!0),(0,s.Wm)(C,{modelValue:d.isModalVisible,"onUpdate:modelValue":e[2]||(e[2]=t=>d.isModalVisible=t),onCloseDialog:m.closeDialog},null,8,["modelValue","onCloseDialog"])])),_:1})}var W=o(6203),O=o(8552),E=o(9730),R={components:{TripPrivateCostDetail:W["default"],TripPublicCost:O["default"],TripPrivateCost:E["default"]},created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession"),sessionStorage.getItem("projectNoSession")?this.tripProjectNo=sessionStorage.getItem("projectNoSession"):this.tripProjectNo="c5bf464bf576",sessionStorage.getItem("userNoSession")?this.tripUserNo=sessionStorage.getItem("userNoSession"):this.tripUserNo="3bb8aff388ab",console.log(this.tripProjectNo),console.log(this.tripUserNo)},mounted(){this.companionSelect()},data(){return{snackbar:!1,companionExistFlag:!1,isModalVisible:!1,isCostVisible:!1,tripProjectNo:"",tripUserNo:"",numberOfCompanions:1,companions:Array.from({length:3},(()=>({tripProjectNo:"",tripCompanionNm:"",tripCompanionOrder:""}))),isOverlayVisible:!0,companionNmDisabled:!1,companionNumDisabled:!1,companionEdit:!0,contentFlag:!1,companionNameRules:[t=>!!t||"동행자 이름은 필수사항 입니다.",t=>/^[가-힣a-zA-Z\s]*$/.test(t)||"동행자 이름은 한글/영어만 입력 가능합니다.",t=>!(t&&t.length>8)||"동행자 이름은 8자 이상 입력할 수 없습니다."]}},methods:{companionSelect(){const t={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/companion/info/list",{params:t}).then((t=>{let e=t.data.length;this.companionExistFlag=e>0,this.companions=t.data,this.numberOfCompanions=e,console.log(t)})).catch((t=>{console.log(t)})).finally((()=>{this.companionExistFlag?this.companionNumDisabled=!0:this.companionNumDisabled=!1}))},async companionApply(){await this.$refs.form.validate().then((t=>{if(t.valid){const t=this.companions.map((t=>(console.log("item",t),{tripProjectNo:this.tripProjectNo,tripCompanionNm:t.tripCompanionNm,tripCompanionOrder:t.tripCompanionOrder})));0==this.companionExistFlag?this.$axios.post("/trip/companion/info",t).then((t=>{console.log(t)})).catch((t=>{console.log(t)})).finally((()=>{})):this.$axios.put("/trip/companion/info/list",t).then((t=>{console.log(t)})).catch((t=>{console.log(t)})).finally((()=>{})),this.isCostVisible=!0,this.companionNumDisabled=!0,this.companionNmDisabled=!0,this.contentFlag=!0,this.isOverlayVisible=!1,this.companionEdit=!1}}))},companionModify(){this.isCostVisible=!1,this.companionNmDisabled=!1,this.contentFlag=!1,this.isOverlayVisible=!0,this.companionEdit=!0},clickComNumber(){this.snackbar=!0,this.companions=Array.from({length:this.numberOfCompanions},(()=>({tripProjectNo:"",tripCompanionNm:"",tripCompanionOrder:""})))},hideOverlay(){},viewCost(t){console.log("Received index from TripPrivateCost:",t),console.log("viewCost isModalVisible",this.isModalVisible),this.isModalVisible=!0},allReset(){},closeDialog(){this.$refs.privateCostMethod.costShow(),this.isModalVisible=!1}}},T=o(89);const I=(0,T.Z)(R,[["render",j],["__scopeId","data-v-c3de4b8e"]]);var q=I},8552:function(t,e,o){o.r(e),o.d(e,{default:function(){return S}});var s=o(3396),i=o(7139),l=o(5101),a=o(6824),n=o(8521),c=o(3289),r=o(4413),u=o(5869);const p=t=>((0,s.dD)("data-v-c93b2d46"),t=t(),(0,s.Cn)(),t),d=p((()=>(0,s._)("div",null,[(0,s._)("span",{class:"subtitle-detail"},"공통 비용")],-1))),m=p((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-center"},"NO."),(0,s._)("th",{class:"text-center"},"사용처"),(0,s._)("th",{class:"text-center"},"비용(원)"),(0,s._)("th",{class:"text-center"},"메모")])],-1))),h={class:"text-center"},b={class:"text-center"},C={class:"text-center"},g={class:"text-center"},f={key:0},v=p((()=>(0,s._)("td",{class:"text-center"},"합계",-1))),w=p((()=>(0,s._)("td",null,null,-1))),N={class:"text-center"};function y(t,e,o,p,y,k){return(0,s.wg)(),(0,s.j4)(a.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n.D,null,{default:(0,s.w5)((()=>[d])),_:1}),y.isEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n.D,{key:0,style:{width:"80px","text-align":"right"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l.T,{onClick:k.costModify,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 수정")])),_:1},8,["onClick"])])),_:1})),y.isEditing?((0,s.wg)(),(0,s.j4)(n.D,{key:1,style:{width:"80px","text-align":"right"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l.T,{onClick:k.addRow,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Wm)(c.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.removeRow,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Wm)(c.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-minus")])),_:1})])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.costReset,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 초기화")])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.costShow,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 보기")])),_:1},8,["onClick"]),(0,s.Wm)(l.T,{onClick:k.costSave,class:"button-style"},{default:(0,s.w5)((()=>[(0,s.Uk)("비용 저장")])),_:1},8,["onClick"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(r.Y,{"fixed-header":"",height:"{{(publicCosts.length * 50) + 20}}px",style:{width:"100%"}},{default:(0,s.w5)((()=>[m,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.publicCosts,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.costOrder},[y.isEditing?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("td",g,(0,i.zw)(t.costOrder),1),(0,s._)("td",null,[(0,s.Wm)(u.h,{outlined:"",class:"gray-text-field",rules:y.costUseRules,modelValue:y.publicCosts[e].costUse,"onUpdate:modelValue":t=>y.publicCosts[e].costUse=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,s._)("td",null,[(0,s.Wm)(u.h,{outlined:"",class:"gray-text-field",rules:y.costRules,modelValue:y.publicCosts[e].cost,"onUpdate:modelValue":t=>y.publicCosts[e].cost=t},null,8,["rules","modelValue","onUpdate:modelValue"])]),(0,s._)("td",null,[(0,s.Wm)(u.h,{outlined:"",class:"gray-text-field",rules:y.costNoteRules,modelValue:y.publicCosts[e].costNote,"onUpdate:modelValue":t=>y.publicCosts[e].costNote=t},null,8,["rules","modelValue","onUpdate:modelValue"])])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("td",h,(0,i.zw)(t.costOrder),1),(0,s._)("td",b,(0,i.zw)(t.costUse),1),(0,s._)("td",C,(0,i.zw)(t.cost.toLocaleString()),1),(0,s._)("td",null,(0,i.zw)(t.costNote),1)],64))])))),128)),y.publicCosts.length>0?((0,s.wg)(),(0,s.iD)("tr",f,[v,w,(0,s._)("td",N,[(0,s._)("strong",null,(0,i.zw)(y.publicCostSum),1)])])):(0,s.kq)("",!0)])])),_:1},8,["height"])])),_:1})}o(7658);var k={components:{},created(){this.tripProjectNo=sessionStorage.getItem("projectNoSession"),this.tripUserNo=sessionStorage.getItem("userNoSession"),sessionStorage.getItem("projectNoSession")?this.tripProjectNo=sessionStorage.getItem("projectNoSession"):this.tripProjectNo="c5bf464bf576",sessionStorage.getItem("userNoSession")?this.tripUserNo=sessionStorage.getItem("userNoSession"):this.tripUserNo="3bb8aff388ab"},mounted(){this.costShow()},data(){return{isEditing:!1,publicCosts:[],publicCostSum:0,costUseRules:[t=>!(t&&t.length>10)||"사용처 입력은 최대 10글자까지 가능합니다.( "+t.length+"글자 )"],costRules:[t=>/^[0-9]*$/.test(t)||"숫자만 입력 가능합니다."],costNoteRules:[t=>!(t&&t.length>30)||"메모 입력은 최대 30글자까지 가능합니다.( "+t.length+"글자 )"],tripSaveCost:[],tripUdpateCost:[],tripDeleteCost:[]}},methods:{costShow(){const t={tripProjectNo:this.tripProjectNo};this.$axios.get("/trip/cost/public/info/list",{params:t}).then((t=>{console.log("costShow",t);let e=0;this.publicCosts=t.data.map((t=>(e+=parseInt(t.tripPublicCost),{costNo:t.tripPublicCostNo,costOrder:t.tripPublicCostOrder,costUse:t.tripPublicCostUse,cost:t.tripPublicCost,costNote:t.tripPublicCostNote}))),this.publicCostSum=e.toLocaleString()})).catch((t=>{console.log(t)})).finally((()=>{this.isEditing=!1}))},costModify(){this.isEditing=!0},async deleteCost(){try{console.log("this.tripDeleteCost",this.tripDeleteCost),await this.$axios.delete("/trip/cost/public/info",{data:this.tripDeleteCost}),console.log("Delete request completed.")}catch(t){console.log("Error during delete request:",t)}finally{this.tripDeleteCost=[],this.costShow()}},async updateCost(){try{await this.$axios.put("/trip/cost/public/info/list",this.tripUdpateCost),console.log("Update request completed.")}catch(t){console.log("Error during update request:",t)}finally{this.tripUdpateCost=[],this.costShow()}},async saveCost(){try{await this.$axios.post("/trip/cost/public/info",this.tripSaveCost),console.log("Save request completed.")}catch(t){console.log("Error during save request:",t)}finally{this.tripSaveCost=[],this.costShow()}},async executeRequests(){await this.deleteCost(),await this.updateCost(),await this.saveCost()},costSave(){let t="";this.publicCosts.forEach((e=>{t=""!=e.costOrder?e.costOrder:"",console.log("tripPublicCostOrder",t),console.log("e.cost",e.cost),""!=t?this.tripUdpateCost.push({tripProjectNo:this.tripProjectNo,tripPublicCost:{tripPublicCostNo:e.costNo,tripPublicCostOrder:t,tripPublicCostUse:e.costUse,tripPublicCost:e.cost,tripPublicCostNote:e.costNote}}):this.tripSaveCost.push({tripProjectNo:this.tripProjectNo,tripPublicCost:{tripPublicCostNo:e.costNo,tripPublicCostUse:e.costUse,tripPublicCost:e.cost,tripPublicCostNote:e.costNote}})})),this.executeRequests(),this.isEditing=!1},costReset(){this.publicCosts=[]},addRow(){this.publicCosts.push({costNo:"",costOrder:"",costUse:"",cost:"",costNote:""})},removeRow(){if(this.publicCosts.length>0){const t=this.publicCosts.slice(-1)[0],e=t.costOrder;""!=e&&(this.tripDeleteCost.push({tripProjectNo:this.tripProjectNo,tripPublicCostNo:t.costNo,tripPublicCostOrder:e}),console.log("this.tripDeleteCost",this.tripDeleteCost)),this.publicCosts.pop()}}}},_=o(89);const P=(0,_.Z)(k,[["render",y],["__scopeId","data-v-c93b2d46"]]);var S=P},6422:function(t,e,o){o.d(e,{O:function(){return d}});var s=o(3396),i=o(9166),l=o(4357),a=o(3185),n=o(4870),c=o(3766),r=o(1107),u=o(9888);const p=(0,c.U)({...(0,i.l)(),...(0,l.vC)()},"VForm"),d=(0,r.ev)()({name:"VForm",props:p(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:o,emit:i}=e;const c=(0,l.Np)(t),r=(0,n.iH)();function p(t){t.preventDefault(),c.reset()}function d(t){const e=t,o=c.validate();e.then=o.then.bind(o),e.catch=o.catch.bind(o),e.finally=o.finally.bind(o),i("submit",e),e.defaultPrevented||o.then((t=>{let{valid:e}=t;e&&r.value?.submit()})),e.preventDefault()}return(0,u.L)((()=>(0,s.Wm)("form",{ref:r,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:p,onSubmit:d},[o.default?.(c)]))),(0,a.F)(c,r)}})}}]);
//# sourceMappingURL=634.70e61ffd.js.map